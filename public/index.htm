<html>

	<head>
		<link rel="stylesheet" type="text/css" href="css/main.css" media="screen" />
	</head>
	<style>

div.pane {
	display: inline-block;
	vertical-align: top;
}

div.left {
	width: 8em;
}

div.body h1 {
	margin-top: 0;
}

div.left li {
	font-size: 0.8em;
}

nav a:hover {
	text-decoration: underline;
}

.side-menu {
	background-color: lightgrey;
	height: 100%;
}

.side-menu h2 {
	font-size: 0.8em;
	padding-left: 1em;
}

nav a {
	cursor: pointer;
	padding: 0.5em 1em;
	font-size: 0.8em;
}

.side-menu a {
	font-weight: bold;
	display: block;
}
.side-menu a.selected {
	background-color: white;
}

.body header nav {
	border-bottom: 1px solid lightgrey;
}
.body header nav a {
	display: inline-block;
}
.body header nav a.selected {
	border-bottom: 1px solid black;
}

div.body {
	padding: 0;
}

.body section {
	padding: 0.5em 1em;
}

section ul.top-level-list {
	padding-left: 1em;
	margin-bottom: 0;
}

section ul.top-level-list li {
	cursor: pointer;
}

a.action {
	font-weight: bold;
	font-size: 0.8em;
	color: black;
	text-decoration: none;
	cursor: pointer;
}
a.action:hover {
	text-decoration: underline;
}

	</style>
	<body>

		<div class='left pane side-menu'>
			<h2>Project List</h2>
			<nav data-bind='foreach: project_list'>
				<a data-bind='css: { selected: selected }, text: name, click: select_project'>Project</a>
			</nav>
		</div>

		<div class='body pane'>
		<header>
			<nav>
				<a name='persona' class='persona'>Persona</a>
				<a name='outcome' class='outcome'>Outcome</a>
				<a name='hypothesis' class='hypothesis'>Hypothesis</a>
				<a name='backlog' class='backlog'>Backlog</a>
			</nav>
		</header>

		<section class='persona hide'>
			<ul class='top-level-list' data-bind='foreach: persona_list'>
				<li><a data-bind='text: name, click: select_persona'>Persona</a></li>
			</ul>
			<a class='action' data-bind='click: new_persona'>+1 More</a>
		</section>

		<section class='outcome hide'>
			<ul class='top-level-list' data-bind='foreach: outcome_list'>
				<li><a data-bind='text: name, click: select_outcome'>Outcome</a></li>
			</ul>
			<a class='action' data-bind='click: new_outcome'>+1 More</a>
		</section>

		<section class='backlog hide'>
			<ul class='top-level-list' data-bind='foreach: backlog_list'>
				<li><a data-bind='text: name, click: select_backlog'>Backlog</a></li>
			</ul>
			<a class='action' data-bind='click: new_backlogitem'>+1 More</a>
		</section>

		<section class='hypothesis hide'>
			<table>
				<thead>
					<tr>
						<th>feature</th>
						<th>persona</th>
						<th>outcome</th>
					</tr>
				</thead>
				<tbody data-bind='foreach: hypothesis_list'>
					<tr data-bind='click: select'>
						<td class='description' data-bind='text: description'></td>
						<td class='persona' data-bind='text: persona().name'></td>
						<td class='outcome' data-bind='text: outcome().name'></td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td colspan='2'></td>
						<td class='action'>
							<a class='action' data-bind='click: new_hypothesis'>+1 More</a>
						</td>
					</tr>
				</tfoot>
			</table>
		</section>

		<section class='form hide'>
		</section>

		<section class='form hypothesis-form hide' data-bind="with: currentHypothesis">
			<form data-bind="submit: submit">
				<div class='form-header'>
				</div>

				<div class='form-body'>
					<ul>
						<li class='description'>
							<label>Hypothesis</label>
							<textarea data-bind="value: description"></textarea>
						</li>
						<li>
							<label>Persona</label>
							<select data-bind="options: vm.persona_list,optionsText: 'name',value: persona"></select>
						</li>
						<li>
							<label>Outcome</label>
							<select data-bind="options: vm.outcome_list,optionsText: 'name',value: outcome"></select>
						</li>
					</ul>
				</div>

				<div class='form-footer'>
					<button type='submit' class='action close'>Done</button>
				</div>
			</form>
		</section>


		<section class='form backlog-form hide' data-bind="with: currentBacklogItem">
			<form data-bind="submit: submit">
				<div class='form-header'>
				</div>

				<div class='form-body'>
					<ul>
						<li class='name'>
							<label>Name</label>
							<input type='text' data-bind="value: name"></textarea>
						</li>
						<li class='description'>
							<label>Description</label>
							<textarea data-bind="value: description"></textarea>
						</li>
					</ul>
				</div>

				<div class='form-footer'>
					<button type='submit' class='action close'>Done</button>
				</div>
			</form>
		</section>


		<section class='form outcome-form hide' data-bind="with: currentOutcome">
			<form data-bind="submit: submit">
				<div class='form-header'>
				</div>

				<div class='form-body'>
					<ul>
						<li class='name'>
							<label>Name</label>
							<input type='text' data-bind="value: name"></textarea>
						</li>
						<li class='description'>
							<label>Description</label>
							<textarea data-bind="value: description"></textarea>
						</li>
					</ul>
				</div>

				<div class='form-footer'>
					<button type='submit' class='action close'>Done</button>
				</div>
			</form>
		</section>


		<section class='form persona-form hide' data-bind="with: currentPersona">
			<form data-bind="submit: submit">
				<div class='form-header'>
				</div>

				<div class='form-body'>
					<ul>
						<li class='name'>
							<label>Name</label>
							<input type='text' class='name' data-bind="value: name"></textarea>
						</li>
						<li class='role'>
							<label>Role</label>
							<input type='text' class='role' data-bind="value: role"></textarea>
						</li>
					</ul>
				</div>

				<div class='form-footer'>
					<button type='submit' class='action close'>Done</button>
				</div>
			</form>
		</section>


		<footer>
		</footer>

	</div>

		<div class='form hypothesis hypothesis-form hide'>
			<div class='form-header'>
			</div>

			<div class='form-body'>
				<ul>
					<li>
						<textarea data-bind="value: description"></textarea>
					</li>
					<li>
						<label>Persona: </label>
						<label data-bind='text: persona().name'></label>
					</li>
					<li>
						<label>Outcome</label>
						<label data-bind='text: outcome().name'></label>
					</li>
				</ul>
			</div>

			<div class='form-footer'>
				<button class='action close' data-bind='click: close'>Done</button>
			</div>
		</div>

		<script src="bower_components/jquery/dist/jquery.min.js"></script>
	  <script src="bower_components/knockout/dist/knockout.js"></script>
	  <script src="bower_components/underscore/underscore-min.js"></script>
		<script src="js/index.js"></script>

		<script>
			var vm = new HypothesisViewModel();
			ko.applyBindings(vm, $('div.body')[0]);
			ko.applyBindings(vm, $('div.left')[0]);

			window.onpopstate = function(event) {
		    vm.popstate( event.state );
		  };

			$( "header nav a" ).click( function(e) {
				vm.show( e.currentTarget.name );
			});

		</script>
	</body>
</html>

<html>

	<head>
		<link rel="stylesheet" type="text/css" href="css/main.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="css/grid.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="css/form.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="css/panel.css" media="screen" />
	</head>
	<style>
	</style>
	<body>

		<div class='left pane side-menu'>
			<h2>Project List</h2>
			<nav data-bind='foreach: project_list'>
				<a data-bind='css: { selected: selected }, text: name, click: select'>Project</a>
			</nav>
		</div>

		<div class='body pane'>
		<header>
			<nav>
				<a name='persona' class='persona'>Persona</a>
				<a name='outcome' class='outcome outcome-form'>Outcome</a>
				<a name='hypothesis-panels' class='hypothesis hypothesis-panels'>Hypothesis</a>
				<a name='backlog' class='backlog'>Backlog</a>
			</nav>
		</header>

		<section class='persona hide'>
			<table class='grid'>
				<thead>
					<tr>
						<th>persona</th>
						<th>role</th>
					</tr>
				</thead>
				<tbody data-bind='foreach: persona_list'>
					<tr data-bind='click: select'>
						<td class='persona' data-bind='text: name'></td>
						<td class='role' data-bind='text: role'></td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td colspan=''></td>
						<td class='action'>
							<a class='action' data-bind='click: new_persona'>+1 More</a>
						</td>
					</tr>
				</tfoot>
			</table>
		</section>

		<section class='outcome hide'>
			<table class='grid'>
				<thead>
					<tr>
						<th>outcome</th>
						<th>description</th>
					</tr>
				</thead>
				<tbody data-bind='foreach: outcome_list'>
					<tr data-bind='click: select'>
						<td class='outcome' data-bind='text: name'></td>
						<td class='description' data-bind='text: description'></td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td colspan=''></td>
						<td class='action'>
							<a class='action' data-bind='click: new_outcome'>+1 More</a>
						</td>
					</tr>
				</tfoot>
			</table>
		</section>

		<section class='backlog hide'>
			<table class='grid'>
				<thead>
					<tr>
						<th>backlog</th>
						<th>description</th>
					</tr>
				</thead>
				<tbody data-bind='foreach: backlog_list'>
					<tr data-bind='click: select'>
						<td class='backlog' data-bind='text: name'></td>
						<td class='description' data-bind='text: description'></td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td colspan=''></td>
						<td class='action'>
							<a class='action' data-bind='click: new_backlogitem'>+1 More</a>
						</td>
					</tr>
				</tfoot>
			</table>
		</section>

		<section class='hypothesis-panels hide'>
			<a class='action' data-bind='click: new_hypothesis'>+1 More</a>
			<div class='screen' data-bind='foreach: hypothesis_list'>
				<div class='panel' data-bind='click: select'>
					<div class='title'>
						<span>Hypothesis</span>
					</div>
					<div class='description' data-bind="text: description"></div>
					<ul>
						<li>
							<label>For</label>
							<span data-bind="text: persona().name"></span>
						</li>
						<li>
							<label>Will lead to</label>
							<span data-bind="text: outcome().name"></span>
						</li>
						<li>
							<label>Importance</label>
							<span data-bind="text: importance"></span>
						</li>
						<li>
							<label>Uncertainty</label>
							<span data-bind="text: uncertainty"></span>
						</li>
					</ul>
				</div>
			</div>
		</section>

		<section class='hypothesis hide'>
			<table class='grid'>
				<thead>
					<tr>
						<th>feature</th>
						<th>persona</th>
						<th>outcome</th>
						<th class='importance'>importance</th>
						<th class='uncertainty'>uncertainty</th>
					</tr>
				</thead>
				<tbody data-bind='foreach: hypothesis_list'>
					<tr data-bind='click: select'>
						<td class='description' data-bind='text: description'></td>
						<td class='persona' data-bind='text: persona().name'></td>
						<td class='outcome' data-bind='text: outcome().name'></td>
						<td class='importance val' data-bind='text: importance'></td>
						<td class='uncertainty val' data-bind='text: uncertainty'></td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td colspan='4'></td>
						<td class='action'>
							<a class='action' data-bind='click: new_hypothesis'>+1 More</a>
						</td>
					</tr>
				</tfoot>
			</table>
		</section>

		<section class='form hide'>
		</section>

		<section class='form hypothesis-form hide' data-bind="with: currentHypothesis">
			<form data-bind="submit: submit">
				<div class='form-header'>
				</div>

				<div class='form-body'>
					<ul>
						<li class='description'>
							<label>Hypothesis</label>
							<textarea data-bind="value: description"></textarea>
						</li>
						<li>
							<label>Persona</label>
							<select data-bind="options: vm.persona_list,optionsText: 'name',value: persona"></select>
						</li>
						<li>
							<label>Outcome</label>
							<select data-bind="options: vm.outcome_list,optionsText: 'name',value: outcome"></select>
						</li>
						<li class='importance'>
							<label>Importance</label>
							<input type='number' data-bind="value: importance" min='1' max='3'></textarea>
						</li>
						<li class='uncertainty'>
							<label>Uncertainty</label>
							<input type='number' data-bind="value: uncertainty" min='1' max='3'></textarea>
						</li>
					</ul>
				</div>

				<div class='form-footer'>
					<button type='submit' class='action close'>Done</button>
				</div>
			</form>
		</section>


		<section class='form backlog-form hide' data-bind="with: currentBacklogItem">
			<form data-bind="submit: submit">
				<div class='form-header'>
				</div>

				<div class='form-body'>
					<ul>
						<li class='name'>
							<label>Name</label>
							<input type='text' data-bind="value: name"></textarea>
						</li>
						<li class='description'>
							<label>Description</label>
							<textarea data-bind="value: description"></textarea>
						</li>
					</ul>
				</div>

				<div class='form-footer'>
					<button type='submit' class='action close'>Done</button>
				</div>
			</form>
		</section>


		<section class='form outcome-form hide' data-bind="with: currentOutcome">
			<form data-bind="submit: submit">
				<div class='form-header'>
				</div>

				<div class='form-body'>
					<ul>
						<li class='name'>
							<label>Name</label>
							<input type='text' data-bind="value: name"></textarea>
						</li>
						<li class='description'>
							<label>Description</label>
							<textarea data-bind="value: description"></textarea>
						</li>
					</ul>
				</div>

				<div class='form-footer'>
					<button type='submit' class='action close'>Done</button>
				</div>
			</form>
		</section>


		<section class='form persona-form hide' data-bind="with: currentPersona">
			<form data-bind="submit: submit">
				<div class='form-header'>
				</div>

				<div class='form-body'>
					<ul>
						<li class='name'>
							<label>Name</label>
							<input type='text' class='name' data-bind="value: name"></textarea>
						</li>
						<li class='role'>
							<label>Role</label>
							<input type='text' class='role' data-bind="value: role"></textarea>
						</li>
					</ul>
				</div>

				<div class='form-footer'>
					<button type='submit' class='action close'>Done</button>
				</div>
			</form>
		</section>


		<footer>
		</footer>

	</div>

		<div class='form hypothesis hypothesis-form hide'>
			<div class='form-header'>
			</div>

			<div class='form-body'>
				<ul>
					<li>
						<textarea data-bind="value: description"></textarea>
					</li>
					<li>
						<label>Persona: </label>
						<label data-bind='text: persona().name'></label>
					</li>
					<li>
						<label>Outcome</label>
						<label data-bind='text: outcome().name'></label>
					</li>
				</ul>
			</div>

			<div class='form-footer'>
				<button class='action close' data-bind='click: close'>Done</button>
			</div>
		</div>

		<script src="bower_components/jquery/dist/jquery.min.js"></script>
	  <script src="bower_components/knockout/dist/knockout.js"></script>
	  <script src="bower_components/underscore/underscore-min.js"></script>
		<script src="js/model.js"></script>
		<script src="js/dataaccess.js"></script>
		<script src="js/viewmodel.js"></script>
		<script src="js/index.js"></script>

		<script>
			var da = new DataAccess();
			var vm = new HypothesisViewModel();
			ko.applyBindings(vm, $('div.body')[0]);
			ko.applyBindings(vm, $('div.left')[0]);

			window.onpopstate = function(event) {
		    vm.popstate( event.state );
		  };

			$( "header nav a" ).click( function(e) {
				vm.show( e.currentTarget.name );
			});

		</script>
	</body>
</html>
